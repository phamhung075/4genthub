
üß™ Starting agenthub Test Suite
üõ°Ô∏è  Test data isolation enabled
üßπ Automatic cleanup configured
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.4.1, pluggy-1.6.0
rootdir: /home/daihungpham/__projects__/4genthub/agenthub_main/src/tests
configfile: pytest.ini
plugins: postgresql-7.0.2, cov-6.2.1, anyio-4.9.0, asyncio-1.0.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 140 items

src/tests/integration/agent_assignment_flow_test.py ............         [  8%]
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py E [  9%]
EEEE                                                                     [ 12%]
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py E [ 12%]
EEEEEE                                                                   [ 17%]
src/tests/integration/task_management/test_critical_fixes_verification.py . [ 17%]
..                                                                       [ 19%]
src/tests/integration/task_management/test_subtask_user_id_fix.py EEE    [ 21%]
src/tests/integration/test_assignees_fix.py ..                           [ 22%]
src/tests/integration/test_auth_websocket_integration.py ........        [ 28%]
src/tests/integration/test_bulk_api.py ssssss                            [ 32%]
src/tests/integration/test_direct_task_creation.py .                     [ 33%]
src/tests/integration/test_docker_config.py ................             [ 45%]
src/tests/integration/test_id_validation_api_flows.py ....               [ 47%]
src/tests/integration/test_manual_task_creation.py .                     [ 48%]
src/tests/integration/test_mcp_authentication_fixes.py FF.FF             [ 52%]
src/tests/integration/test_mcp_tools_inclusion.py .                      [ 52%]
src/tests/integration/test_selective_field_queries.py .............      [ 62%]
src/tests/integration/test_service_account_auth.py ...................ss [ 77%]
s                                                                        [ 77%]
src/tests/integration/test_subtask_api_integration.py sss.ss             [ 82%]
src/tests/integration/test_websocket_server.py s.................        [ 95%]
src/tests/integration/test_websocket_v2.py .......                       [100%]
üßπ Performing final test data cleanup...
üßπ Final cleanup completed:
   - 0 test data files removed
   - 0 temporary directories removed
‚úÖ Test environment is clean


==================================== ERRORS ====================================
_ ERROR at setup of TestGitBranchFilteringIntegration.test_list_tasks_filters_by_branch_a _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:49: in setup_method
    self._create_project_and_branches()
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:92: in _create_project_and_branches
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('15b67979-7a9a-4cfd-8459-ef6076bc34eb', 'Test Project 15b67979', 'Integration test project', 'test-user-integration', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:52,898 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:52,898 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:52,898 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:52,898 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:52,898 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:52,898 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:52,898 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:52,898 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:52,899 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:52,899 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:52,899 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:52,899 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:52,903 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:52,904 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:52,904 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:52,904 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:52,904 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:52,904 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:52,904 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:52,915 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:52,915 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:52,915 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:52,915 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:52,916 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:52,919 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:52,920 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:52,926 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:52,927 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:52,932 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:52,933 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:52,939 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:52,940 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:52,946 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:52,946 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:52,946 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:52,946 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:52,946 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:52,946 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:52,946 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 52, 947185, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 52, 947187, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:52,948 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:52,948 - fastmcp.task_management.application.services.context_inheritance_service - INFO - ContextInheritanceService initialized
2025-09-23 05:42:52,948 - fastmcp.task_management.application.services.context_delegation_service - INFO - ContextDelegationService initialized
2025-09-23 05:42:52,948 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:52,948 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
2025-09-23 05:42:52,948 - fastmcp.task_management.infrastructure.repositories.repository_factory - WARNING - SQLiteGitBranchRepository not available, falling back to ORM
2025-09-23 05:42:52,948 - fastmcp.task_management.infrastructure.repositories.orm.git_branch_repository - INFO - ORMGitBranchRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:52,948 - fastmcp.task_management.infrastructure.repositories.repository_factory - INFO - [RepositoryFactory] Using ORMGitBranchRepository (fallback)
2025-09-23 05:42:52,975 - fastmcp.task_management.infrastructure.repositories.repository_factory - INFO - [RepositoryFactory] Wrapping with CachedGitBranchRepository
2025-09-23 05:42:52,976 - fastmcp.task_management.infrastructure.repositories.cached.cached_git_branch_repository - WARNING - [CachedGitBranchRepository] Redis not available, caching disabled: Error 111 connecting to localhost:6379. Connection refused.
2025-09-23 05:42:52,976 - fastmcp.task_management.infrastructure.repositories.git_branch_repository_factory - INFO - Created git branch repository: orm for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:52,976 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=None, project=None, branch=None
2025-09-23 05:42:52,978 - git_branch_filtering_integration_test - ERROR - Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('15b67979-7a9a-4cfd-8459-ef6076bc34eb', 'Test Project 15b67979', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.services.context_inheritance_service:context_inheritance_service.py:29 ContextInheritanceService initialized
INFO     fastmcp.task_management.application.services.context_delegation_service:context_delegation_service.py:51 ContextDelegationService initialized
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
WARNING  fastmcp.task_management.infrastructure.repositories.repository_factory:repository_factory.py:162 SQLiteGitBranchRepository not available, falling back to ORM
INFO     fastmcp.task_management.infrastructure.repositories.orm.git_branch_repository:git_branch_repository.py:49 ORMGitBranchRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.infrastructure.repositories.repository_factory:repository_factory.py:182 [RepositoryFactory] Using ORMGitBranchRepository (fallback)
INFO     fastmcp.task_management.infrastructure.repositories.repository_factory:repository_factory.py:188 [RepositoryFactory] Wrapping with CachedGitBranchRepository
WARNING  fastmcp.task_management.infrastructure.repositories.cached.cached_git_branch_repository:cached_git_branch_repository.py:51 [CachedGitBranchRepository] Redis not available, caching disabled: Error 111 connecting to localhost:6379. Connection refused.
INFO     fastmcp.task_management.infrastructure.repositories.git_branch_repository_factory:git_branch_repository_factory.py:66 Created git branch repository: orm for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=None, project=None, branch=None
ERROR    git_branch_filtering_integration_test:git_branch_filtering_integration_test.py:100 Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('15b67979-7a9a-4cfd-8459-ef6076bc34eb', 'Test Project 15b67979', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchFilteringIntegration.test_list_tasks_filters_by_branch_b _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:49: in setup_method
    self._create_project_and_branches()
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:92: in _create_project_and_branches
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('6b4d4af8-2080-4959-b56b-f4199958fa35', 'Test Project 6b4d4af8', 'Integration test project', 'test-user-integration', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:53,201 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:53,202 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:53,207 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:53,207 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:53,207 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:53,207 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:53,207 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:53,207 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:53,207 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:53,219 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:53,219 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:53,220 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:53,220 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:53,220 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:53,223 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:53,225 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:53,232 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:53,233 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:53,237 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:53,238 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:53,243 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:53,244 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:53,250 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:53,250 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:53,250 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:53,250 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:53,251 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:53,251 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:53,251 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 53, 251505, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 53, 251507, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:53,252 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:53,252 - fastmcp.task_management.application.services.context_inheritance_service - INFO - ContextInheritanceService initialized
2025-09-23 05:42:53,252 - fastmcp.task_management.application.services.context_delegation_service - INFO - ContextDelegationService initialized
2025-09-23 05:42:53,252 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:53,252 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
2025-09-23 05:42:53,252 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=None, project=None, branch=None
2025-09-23 05:42:53,254 - git_branch_filtering_integration_test - ERROR - Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('6b4d4af8-2080-4959-b56b-f4199958fa35', 'Test Project 6b4d4af8', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.services.context_inheritance_service:context_inheritance_service.py:29 ContextInheritanceService initialized
INFO     fastmcp.task_management.application.services.context_delegation_service:context_delegation_service.py:51 ContextDelegationService initialized
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=None, project=None, branch=None
ERROR    git_branch_filtering_integration_test:git_branch_filtering_integration_test.py:100 Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('6b4d4af8-2080-4959-b56b-f4199958fa35', 'Test Project 6b4d4af8', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchFilteringIntegration.test_list_tasks_without_filter_returns_all_tasks _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:49: in setup_method
    self._create_project_and_branches()
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:92: in _create_project_and_branches
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('6682bb1b-02c4-48b7-93f7-2a5352031745', 'Test Project 6682bb1b', 'Integration test project', 'test-user-integration', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:53,441 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:53,441 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:53,442 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:53,457 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:53,458 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:53,458 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:53,458 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:53,458 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:53,458 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:53,458 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:53,470 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:53,470 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:53,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:53,471 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:53,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:53,475 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:53,476 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:53,483 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:53,484 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:53,487 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:53,488 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:53,494 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:53,495 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:53,502 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:53,502 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:53,502 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:53,502 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:53,502 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:53,502 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:53,502 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 53, 503101, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 53, 503102, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:53,503 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:53,503 - fastmcp.task_management.application.services.context_inheritance_service - INFO - ContextInheritanceService initialized
2025-09-23 05:42:53,503 - fastmcp.task_management.application.services.context_delegation_service - INFO - ContextDelegationService initialized
2025-09-23 05:42:53,504 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:53,504 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
2025-09-23 05:42:53,504 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=None, project=None, branch=None
2025-09-23 05:42:53,505 - git_branch_filtering_integration_test - ERROR - Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('6682bb1b-02c4-48b7-93f7-2a5352031745', 'Test Project 6682bb1b', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.services.context_inheritance_service:context_inheritance_service.py:29 ContextInheritanceService initialized
INFO     fastmcp.task_management.application.services.context_delegation_service:context_delegation_service.py:51 ContextDelegationService initialized
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=None, project=None, branch=None
ERROR    git_branch_filtering_integration_test:git_branch_filtering_integration_test.py:100 Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('6682bb1b-02c4-48b7-93f7-2a5352031745', 'Test Project 6682bb1b', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchFilteringIntegration.test_optimized_repository_direct_filtering _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:49: in setup_method
    self._create_project_and_branches()
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:92: in _create_project_and_branches
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('a7ecd3f0-e0dc-4c1c-9316-0006b87e8d10', 'Test Project a7ecd3f0', 'Integration test project', 'test-user-integration', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:53,700 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:53,700 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:53,701 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:53,717 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:53,717 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:53,717 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:53,717 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:53,717 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:53,717 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:53,717 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:53,727 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:53,728 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:53,728 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:53,728 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:53,728 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:53,732 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:53,734 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:53,739 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:53,740 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:53,744 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:53,745 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:53,752 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:53,753 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:53,759 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:53,759 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:53,759 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:53,759 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:53,759 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:53,759 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:53,759 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 53, 760154, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 53, 760155, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:53,761 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:53,761 - fastmcp.task_management.application.services.context_inheritance_service - INFO - ContextInheritanceService initialized
2025-09-23 05:42:53,761 - fastmcp.task_management.application.services.context_delegation_service - INFO - ContextDelegationService initialized
2025-09-23 05:42:53,761 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:53,761 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
2025-09-23 05:42:53,761 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=None, project=None, branch=None
2025-09-23 05:42:53,762 - git_branch_filtering_integration_test - ERROR - Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('a7ecd3f0-e0dc-4c1c-9316-0006b87e8d10', 'Test Project a7ecd3f0', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.services.context_inheritance_service:context_inheritance_service.py:29 ContextInheritanceService initialized
INFO     fastmcp.task_management.application.services.context_delegation_service:context_delegation_service.py:51 ContextDelegationService initialized
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=None, project=None, branch=None
ERROR    git_branch_filtering_integration_test:git_branch_filtering_integration_test.py:100 Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('a7ecd3f0-e0dc-4c1c-9316-0006b87e8d10', 'Test Project a7ecd3f0', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchFilteringIntegration.test_optimized_repository_parameter_override _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:49: in setup_method
    self._create_project_and_branches()
src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py:92: in _create_project_and_branches
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('8e43272f-9982-4ce4-835b-bfc560d7c71d', 'Test Project 8e43272f', 'Integration test project', 'test-user-integration', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:53,953 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:53,954 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:53,955 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:53,971 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:53,971 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:53,972 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:53,972 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:53,972 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:53,972 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:53,972 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:53,984 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:53,984 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:53,985 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:53,985 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:53,985 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:53,989 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:53,990 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:53,996 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:53,997 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:54,002 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:54,003 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:54,010 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:54,011 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:54,018 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:54,018 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:54,018 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:54,018 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:54,018 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:54,018 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:54,018 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 54, 18909, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 54, 18910, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:54,019 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:54,019 - fastmcp.task_management.application.services.context_inheritance_service - INFO - ContextInheritanceService initialized
2025-09-23 05:42:54,019 - fastmcp.task_management.application.services.context_delegation_service - INFO - ContextDelegationService initialized
2025-09-23 05:42:54,019 - fastmcp.task_management.infrastructure.repositories.global_context_repository - INFO - GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
2025-09-23 05:42:54,019 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
2025-09-23 05:42:54,020 - fastmcp.task_management.application.facades.unified_context_facade - INFO - UnifiedContextFacade initialized for user=None, project=None, branch=None
2025-09-23 05:42:54,021 - git_branch_filtering_integration_test - ERROR - Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('8e43272f-9982-4ce4-835b-bfc560d7c71d', 'Test Project 8e43272f', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.services.context_inheritance_service:context_inheritance_service.py:29 ContextInheritanceService initialized
INFO     fastmcp.task_management.application.services.context_delegation_service:context_delegation_service.py:51 ContextDelegationService initialized
INFO     fastmcp.task_management.infrastructure.repositories.global_context_repository:global_context_repository.py:48 GlobalContextRepository initialized for user: c81d46f1-a698-551d-8598-904b925ae034
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=c81d46f1-a698-551d-8598-904b925ae034, project=None, branch=None
INFO     fastmcp.task_management.application.facades.unified_context_facade:unified_context_facade.py:49 UnifiedContextFacade initialized for user=None, project=None, branch=None
ERROR    git_branch_filtering_integration_test:git_branch_filtering_integration_test.py:100 Failed to create project and branches: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('8e43272f-9982-4ce4-835b-bfc560d7c71d', 'Test Project 8e43272f', 'Integration test project', 'test-user-integration', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchZeroTasksDeletionIntegration.test_verify_test_data_setup _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:48: in setup_method
    self._create_test_data_in_database()
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:118: in _create_test_data_in_database
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('fc167668-a824-4608-ae75-3eaa219721a2', 'Integration Test Project fc167668', 'Integration test for git branch deletion', 'b3094e20-313b-41bb-9dfa-2babecfa6158', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:54,280 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:54,280 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:54,281 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:54,296 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:54,296 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:54,297 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:54,297 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:54,297 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:54,297 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:54,297 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:54,308 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:54,308 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:54,308 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:54,308 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:54,309 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:54,312 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:54,313 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:54,318 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:54,319 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:54,324 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:54,325 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:54,330 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:54,331 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:54,336 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:54,336 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:54,337 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:54,337 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:54,337 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:54,337 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:54,337 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 54, 337651, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 54, 337652, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:54,338 - fastmcp.task_management.application.factories.git_branch_facade_factory - INFO - GitBranchFacadeFactory initialized
2025-09-23 05:42:54,338 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:42:54,338 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:42:54,338 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:42:54,340 - git_branch_zero_tasks_deletion_integration_test - ERROR - Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('fc167668-a824-4608-ae75-3eaa219721a2', 'Integration Test Project fc167668', 'Integration test for git branch deletion', 'b3094e20-313b-41bb-9dfa-2babecfa6158', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.application.factories.git_branch_facade_factory:git_branch_facade_factory.py:66 GitBranchFacadeFactory initialized
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
ERROR    git_branch_zero_tasks_deletion_integration_test:git_branch_zero_tasks_deletion_integration_test.py:127 Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('fc167668-a824-4608-ae75-3eaa219721a2', 'Integration Test Project fc167668', 'Integration test for git branch deletion', 'b3094e20-313b-41bb-9dfa-2babecfa6158', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchZeroTasksDeletionIntegration.test_delete_empty_branch_full_integration _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:48: in setup_method
    self._create_test_data_in_database()
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:118: in _create_test_data_in_database
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('552ede74-fee3-4b26-a32b-1d7d4cf4aa4e', 'Integration Test Project 552ede74', 'Integration test for git branch deletion', '145629e2-c0d0-407a-b780-b1af84ae1008', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:54,523 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:54,524 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:54,540 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:54,540 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:54,540 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:54,540 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:54,540 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:54,541 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:54,541 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:54,550 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:54,550 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:54,551 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:54,551 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:54,551 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:54,555 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:54,556 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:54,562 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:54,563 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:54,566 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:54,568 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:54,575 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:54,576 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:54,581 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:54,581 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:54,581 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:54,581 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:54,582 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:54,582 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:54,582 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 54, 582417, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 54, 582418, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:54,582 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:42:54,582 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:42:54,582 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:42:54,584 - git_branch_zero_tasks_deletion_integration_test - ERROR - Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('552ede74-fee3-4b26-a32b-1d7d4cf4aa4e', 'Integration Test Project 552ede74', 'Integration test for git branch deletion', '145629e2-c0d0-407a-b780-b1af84ae1008', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
ERROR    git_branch_zero_tasks_deletion_integration_test:git_branch_zero_tasks_deletion_integration_test.py:127 Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('552ede74-fee3-4b26-a32b-1d7d4cf4aa4e', 'Integration Test Project 552ede74', 'Integration test for git branch deletion', '145629e2-c0d0-407a-b780-b1af84ae1008', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchZeroTasksDeletionIntegration.test_delete_branch_with_tasks_for_comparison _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:48: in setup_method
    self._create_test_data_in_database()
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:118: in _create_test_data_in_database
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('35eb1c48-ea3a-4593-bbcf-b4833b8051e8', 'Integration Test Project 35eb1c48', 'Integration test for git branch deletion', 'acd68884-85a8-41b4-ac36-ee8803be7c86', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:54,757 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:54,758 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:54,774 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:54,774 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:54,775 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:54,775 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:54,775 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:54,775 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:54,775 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:54,785 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:54,785 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:54,785 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:54,785 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:54,785 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:54,789 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:54,790 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:54,796 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:54,797 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:54,801 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:54,802 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:54,808 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:54,809 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:54,815 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:54,815 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:54,815 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:54,815 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:54,815 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:54,815 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:54,815 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 54, 815918, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 54, 815919, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:54,816 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:42:54,816 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:42:54,816 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:42:54,817 - git_branch_zero_tasks_deletion_integration_test - ERROR - Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('35eb1c48-ea3a-4593-bbcf-b4833b8051e8', 'Integration Test Project 35eb1c48', 'Integration test for git branch deletion', 'acd68884-85a8-41b4-ac36-ee8803be7c86', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
ERROR    git_branch_zero_tasks_deletion_integration_test:git_branch_zero_tasks_deletion_integration_test.py:127 Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('35eb1c48-ea3a-4593-bbcf-b4833b8051e8', 'Integration Test Project 35eb1c48', 'Integration test for git branch deletion', 'acd68884-85a8-41b4-ac36-ee8803be7c86', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchZeroTasksDeletionIntegration.test_list_branches_shows_task_counts_correctly _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:48: in setup_method
    self._create_test_data_in_database()
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:118: in _create_test_data_in_database
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('1d79988f-c9ab-411b-8845-47f5dfc90f23', 'Integration Test Project 1d79988f', 'Integration test for git branch deletion', '1bd00222-40a4-4c37-9efb-26bd714e868e', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:54,990 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:54,990 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:54,990 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:54,990 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:54,990 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:54,990 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:54,991 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:54,991 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:54,991 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:54,991 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:54,991 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:54,991 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:55,006 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:55,006 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:55,007 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:55,007 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:55,007 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:55,007 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:55,007 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:55,017 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:55,017 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:55,018 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:55,018 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:55,018 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:55,021 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:55,022 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:55,027 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:55,029 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:55,032 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:55,033 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:55,042 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:55,043 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:55,050 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:55,050 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:55,050 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:55,050 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:55,050 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:55,050 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:55,050 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 55, 51181, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 55, 51182, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:55,051 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:42:55,051 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:42:55,051 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:42:55,053 - git_branch_zero_tasks_deletion_integration_test - ERROR - Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('1d79988f-c9ab-411b-8845-47f5dfc90f23', 'Integration Test Project 1d79988f', 'Integration test for git branch deletion', '1bd00222-40a4-4c37-9efb-26bd714e868e', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
ERROR    git_branch_zero_tasks_deletion_integration_test:git_branch_zero_tasks_deletion_integration_test.py:127 Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('1d79988f-c9ab-411b-8845-47f5dfc90f23', 'Integration Test Project 1d79988f', 'Integration test for git branch deletion', '1bd00222-40a4-4c37-9efb-26bd714e868e', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchZeroTasksDeletionIntegration.test_get_branch_statistics_for_empty_branch _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:48: in setup_method
    self._create_test_data_in_database()
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:118: in _create_test_data_in_database
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('ca84a9e1-29f0-4281-9a8b-8b7e969f1e0c', 'Integration Test Project ca84a9e1', 'Integration test for git branch deletion', '932a2a0f-2f55-4183-87eb-d2eefacad51a', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:55,225 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:55,225 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:55,225 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:55,225 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:55,225 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:55,225 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:55,226 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:55,226 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:55,226 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:55,226 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:55,226 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:55,226 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:55,241 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:55,241 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:55,242 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:55,242 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:55,242 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:55,242 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:55,242 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:55,252 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:55,252 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:55,252 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:55,252 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:55,252 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:55,257 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:55,258 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:55,264 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:55,265 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:55,270 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:55,271 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:55,276 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:55,277 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:55,282 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:55,282 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:55,282 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:55,282 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:55,283 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:55,283 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:55,283 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 55, 283637, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 55, 283638, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:55,284 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:42:55,284 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:42:55,284 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:42:55,285 - git_branch_zero_tasks_deletion_integration_test - ERROR - Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('ca84a9e1-29f0-4281-9a8b-8b7e969f1e0c', 'Integration Test Project ca84a9e1', 'Integration test for git branch deletion', '932a2a0f-2f55-4183-87eb-d2eefacad51a', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
ERROR    git_branch_zero_tasks_deletion_integration_test:git_branch_zero_tasks_deletion_integration_test.py:127 Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('ca84a9e1-29f0-4281-9a8b-8b7e969f1e0c', 'Integration Test Project ca84a9e1', 'Integration test for git branch deletion', '932a2a0f-2f55-4183-87eb-d2eefacad51a', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchZeroTasksDeletionIntegration.test_edge_case_delete_nonexistent_branch _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:48: in setup_method
    self._create_test_data_in_database()
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:118: in _create_test_data_in_database
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('c839aa21-b639-4afe-9186-1b96e39d8bc4', 'Integration Test Project c839aa21', 'Integration test for git branch deletion', '7a58c476-a15b-40e7-a066-a442caba81fe', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:55,470 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:55,471 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:55,476 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:55,476 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:55,476 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:55,476 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:55,476 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:55,476 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:55,476 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:55,487 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:55,487 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:55,488 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:55,488 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:55,488 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:55,492 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:55,494 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:55,499 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:55,501 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:55,506 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:55,507 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:55,513 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:55,514 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:55,521 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:55,521 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:55,521 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:55,521 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:55,521 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:55,521 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:55,521 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 55, 521966, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 55, 521967, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:55,522 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:42:55,522 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:42:55,522 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:42:55,523 - git_branch_zero_tasks_deletion_integration_test - ERROR - Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('c839aa21-b639-4afe-9186-1b96e39d8bc4', 'Integration Test Project c839aa21', 'Integration test for git branch deletion', '7a58c476-a15b-40e7-a066-a442caba81fe', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
ERROR    git_branch_zero_tasks_deletion_integration_test:git_branch_zero_tasks_deletion_integration_test.py:127 Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('c839aa21-b639-4afe-9186-1b96e39d8bc4', 'Integration Test Project c839aa21', 'Integration test for git branch deletion', '7a58c476-a15b-40e7-a066-a442caba81fe', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
_ ERROR at setup of TestGitBranchZeroTasksDeletionIntegration.test_comprehensive_branch_lifecycle _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:48: in setup_method
    self._create_test_data_in_database()
src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py:118: in _create_test_data_in_database
    session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('56d6012f-42ca-474c-963f-f9046c0f6c0a', 'Integration Test Project 56d6012f', 'Integration test for git branch deletion', 'e46b3923-7d89-426b-95a4-f2bf24d40814', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:55,699 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:55,700 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:55,716 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:55,716 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:55,716 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:55,716 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:55,716 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:55,716 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:55,716 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:55,726 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:55,726 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:55,727 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:55,727 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:55,727 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:55,730 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:55,732 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:55,738 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:55,739 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:55,742 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:55,743 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:55,750 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:55,751 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:55,756 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:55,757 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:55,757 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:55,757 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:55,757 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:55,757 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:55,757 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 55, 757691, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 55, 757692, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:42:55,758 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:42:55,758 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:42:55,758 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:42:55,759 - git_branch_zero_tasks_deletion_integration_test - ERROR - Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('56d6012f-42ca-474c-963f-f9046c0f6c0a', 'Integration Test Project 56d6012f', 'Integration test for git branch deletion', 'e46b3923-7d89-426b-95a4-f2bf24d40814', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
ERROR    git_branch_zero_tasks_deletion_integration_test:git_branch_zero_tasks_deletion_integration_test.py:127 Failed to create integration test data: (sqlite3.OperationalError) disk I/O error
[SQL: INSERT INTO projects (id, name, description, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at, updated_at]
[parameters: ('56d6012f-42ca-474c-963f-f9046c0f6c0a', 'Integration Test Project 56d6012f', 'Integration test for git branch deletion', 'e46b3923-7d89-426b-95a4-f2bf24d40814', 'active', '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
___ ERROR at setup of TestSubtaskUserIdFix.test_create_subtask_with_user_id ____
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/test_subtask_user_id_fix.py:75: in setup_method
    self.session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, created_at, updated_at, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('d8714a2a-ccf4-41d7-bdb7-ba2af22baec1', 'Test Project for Subtask', 'Project for testing subtask user_id fix', '2025-09-23 03:42:56.168797', '2025-09-23 03:42:56.168798', 'cc15e5bd-a26a-473c-90af-0e507429898a', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:56,119 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:56,119 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:56,119 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:56,120 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:56,124 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:56,124 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:56,124 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:56,124 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:56,124 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:56,124 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:56,124 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:56,135 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:56,135 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:56,135 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:56,136 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:56,136 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:56,139 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:56,141 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:56,147 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:56,149 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:56,152 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:56,154 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:56,159 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:56,161 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:56,167 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:56,167 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:56,167 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:56,167 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:56,167 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:56,167 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:56,167 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 56, 168201, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 56, 168202, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
_ ERROR at setup of TestSubtaskUserIdFix.test_create_subtask_without_user_id_uses_mvp_fallback _
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/test_subtask_user_id_fix.py:75: in setup_method
    self.session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, created_at, updated_at, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('81afa135-89c4-41a9-ba92-ea01c5be1fc8', 'Test Project for Subtask', 'Project for testing subtask user_id fix', '2025-09-23 03:42:56.405507', '2025-09-23 03:42:56.405509', 'e819f357-7459-40e5-a562-57b55ff65612', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:56,349 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:56,350 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:56,366 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:56,366 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:56,366 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:56,366 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:56,366 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:56,366 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:56,366 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:56,376 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:56,376 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:56,376 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:56,376 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:56,376 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:56,380 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:56,381 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:56,387 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:56,388 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:56,391 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:56,393 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:56,398 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:56,399 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:56,404 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:56,404 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:56,404 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:56,404 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:56,404 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:56,404 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:56,404 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 56, 405003, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 56, 405004, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
_ ERROR at setup of TestSubtaskUserIdFix.test_subtask_repository_from_factory __
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.OperationalError: disk I/O error

The above exception was the direct cause of the following exception:
src/tests/integration/task_management/test_subtask_user_id_fix.py:75: in setup_method
    self.session.commit()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
../../../.local/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
../../../.local/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
../../../.local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
../../../.local/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) disk I/O error
E   [SQL: INSERT INTO projects (id, name, description, created_at, updated_at, user_id, status, metadata) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('c41ecf2e-93f9-4757-af12-377e56641b3e', 'Test Project for Subtask', 'Project for testing subtask user_id fix', '2025-09-23 03:42:56.640292', '2025-09-23 03:42:56.640293', '07930183-2669-4658-b151-0811127eae08', 'active', '{}')]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:42:56,582 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:42:56,583 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:42:56,599 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:42:56,599 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:56,599 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:56,599 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:42:56,599 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:42:56,600 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:42:56,600 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:42:56,609 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:42:56,609 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:42:56,610 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:42:56,610 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:42:56,610 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:42:56,613 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:42:56,615 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:42:56,620 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:42:56,621 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:42:56,625 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:42:56,626 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:42:56,632 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:42:56,633 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:42:56,639 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:42:56,639 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:42:56,639 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:42:56,639 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:42:56,639 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:42:56,639 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:42:56,639 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 42, 56, 639786, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 42, 56, 639787, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
=================================== FAILURES ===================================
______ TestMCPAuthenticationFixes.test_task_creation_authentication_fixed ______
src/tests/integration/test_mcp_authentication_fixes.py:86: in test_task_creation_authentication_fixed
    assert project_result.get('success') is True, f"Project creation failed: {project_result.get('error')}"
E   AssertionError: Project creation failed: Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
E     [SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
E     FROM projects 
E     WHERE projects.id = ?
E      LIMIT ? OFFSET ?]
E     [parameters: ('493b0f39-e66f-43da-86c3-988c58fea116', 1, 0)]
E     (Background on this error at: https://sqlalche.me/e/20/e3q8)
E   assert False is True
E    +  where False = <built-in method get of dict object at 0x755eb970ad00>('success')
E    +    where <built-in method get of dict object at 0x755eb970ad00> = {'error': "Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error\n[SQL: SELECT ...-e66f-43da-86c3-988c58fea116', 1, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", 'success': False}.get
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:43:33,348 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:43:33,349 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:43:33,350 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:43:33,354 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:43:33,354 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:43:33,354 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:43:33,354 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:43:33,354 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:43:33,354 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:43:33,354 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:43:33,365 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:43:33,365 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:43:33,366 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:43:33,366 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:43:33,366 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:43:33,371 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:43:33,372 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:43:33,378 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:43:33,379 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:43:33,383 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:43:33,384 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:43:33,390 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:43:33,391 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:43:33,397 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:43:33,397 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:43:33,397 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:43:33,397 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:43:33,397 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:43:33,397 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:43:33,397 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 43, 33, 397948, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 43, 33, 397949, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:43:33,398 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Initializing DDD-compliant MCP tools...
2025-09-23 05:43:33,398 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - PathResolver initialized for project: /home/daihungpham/__projects__/4genthub/agenthub_main
2025-09-23 05:43:33,398 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - Brain directory: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain
2025-09-23 05:43:33,398 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - Projects file: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain/projects.json
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Database connection established successfully
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.operation_factory - INFO - OperationFactory initialized with all handlers including AI
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.validation_factory - INFO - ValidationFactory initialized with all validators
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.response_factory - INFO - ResponseFactory initialized
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service - INFO - EnhancementService initialized
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer - INFO - WorkflowHintEnhancer initialized with modular architecture
2025-09-23 05:43:33,399 - fastmcp.task_management.application.services.parameter_enforcement_service - INFO - ParameterEnforcementService initialized with level: warning
2025-09-23 05:43:33,399 - fastmcp.task_management.application.services.progressive_enforcement_service - INFO - ProgressiveEnforcementService initialized with default level: warning
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.task_mcp_controller - INFO - TaskMCPController initialized with modular architecture
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.factories.operation_factory - INFO - SubtaskOperationFactory initialized with all handlers
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.subtask_mcp_controller - INFO - SubtaskMCPController initialized with modular architecture and progress tracking
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.unified_context_controller.factories.operation_factory - INFO - ContextOperationFactory initialized with modular handler
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.unified_context_controller.unified_context_controller - INFO - UnifiedContextMCPController initialized with modular architecture
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.factories.operation_factory - INFO - ProjectOperationFactory initialized with modular handlers
2025-09-23 05:43:33,399 - fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.project_mcp_controller - INFO - ProjectMCPController initialized with modular architecture
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.factories.operation_factory - INFO - AgentOperationFactory initialized with modular handlers
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.agent_mcp_controller - INFO - AgentMCPController initialized with modular architecture (factory pattern and workflow guidance)
2025-09-23 05:43:33,400 - root - INFO - Agent factory initialized with path: /home/daihungpham/__projects__/4genthub/agenthub_main/agent-library
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.handlers.agent_invocation_handler - INFO - AgentInvocationHandler initialized
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.call_agent_mcp_controller - INFO - CallAgentMCPController initialized
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Vision System disabled - using standard workflow without enhanced features
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service - INFO - EnhancementService initialized
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer - INFO - WorkflowHintEnhancer initialized with modular architecture
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Standard workflow controllers initialized successfully.
2025-09-23 05:43:33,400 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - DDD-compliant MCP tools initialized successfully.
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:83 Initializing DDD-compliant MCP tools...
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:54 PathResolver initialized for project: /home/daihungpham/__projects__/4genthub/agenthub_main
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:55 Brain directory: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:56 Projects file: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain/projects.json
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:98 Database connection established successfully
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.operation_factory:operation_factory.py:33 OperationFactory initialized with all handlers including AI
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.validation_factory:validation_factory.py:29 ValidationFactory initialized with all validators
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.response_factory:response_factory.py:20 ResponseFactory initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service:enhancement_service.py:18 EnhancementService initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer:workflow_hint_enhancer.py:36 WorkflowHintEnhancer initialized with modular architecture
INFO     fastmcp.task_management.application.services.parameter_enforcement_service:parameter_enforcement_service.py:121 ParameterEnforcementService initialized with level: warning
INFO     fastmcp.task_management.application.services.progressive_enforcement_service:progressive_enforcement_service.py:145 ProgressiveEnforcementService initialized with default level: warning
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.task_mcp_controller:task_mcp_controller.py:177 TaskMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.factories.operation_factory:operation_factory.py:38 SubtaskOperationFactory initialized with all handlers
INFO     fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.subtask_mcp_controller:subtask_mcp_controller.py:117 SubtaskMCPController initialized with modular architecture and progress tracking
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.unified_context_controller.factories.operation_factory:operation_factory.py:23 ContextOperationFactory initialized with modular handler
INFO     fastmcp.task_management.interface.mcp_controllers.unified_context_controller.unified_context_controller:unified_context_controller.py:50 UnifiedContextMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.factories.operation_factory:operation_factory.py:27 ProjectOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.project_mcp_controller:project_mcp_controller.py:112 ProjectMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.factories.operation_factory:operation_factory.py:29 AgentOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.agent_mcp_controller:agent_mcp_controller.py:80 AgentMCPController initialized with modular architecture (factory pattern and workflow guidance)
INFO     root:call_agent.py:316 Agent factory initialized with path: /home/daihungpham/__projects__/4genthub/agenthub_main/agent-library
INFO     fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.handlers.agent_invocation_handler:agent_invocation_handler.py:20 AgentInvocationHandler initialized
INFO     fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.call_agent_mcp_controller:call_agent_mcp_controller.py:37 CallAgentMCPController initialized
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:181 Vision System disabled - using standard workflow without enhanced features
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service:enhancement_service.py:18 EnhancementService initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer:workflow_hint_enhancer.py:36 WorkflowHintEnhancer initialized with modular architecture
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:195 Standard workflow controllers initialized successfully.
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:197 DDD-compliant MCP tools initialized successfully.
----------------------------- Captured stdout call -----------------------------
2025-09-23 05:43:33,401 - fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service - INFO - üîç JWT authentication check for operation: manage_project:create
2025-09-23 05:43:33,401 - fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service - INFO - ‚úÖ Using JWT user_id from HTTP server: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
2025-09-23 05:43:33,401 - fastmcp.task_management.interface.mcp_controllers.auth_helper.auth_helper - INFO - üîê Authenticated user: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef for operation: manage_project:create
2025-09-23 05:43:33,401 - fastmcp.task_management.application.factories.project_facade_factory - INFO - ProjectFacadeFactory initialized
2025-09-23 05:43:33,401 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - üîç Project Repository Factory: Creating repository with user_id: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
2025-09-23 05:43:33,401 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - üîß Repository type: None, db_path: None
DEBUG: ProjectRepositoryFactory.create called with user_id=8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
2025-09-23 05:43:33,401 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - ‚úÖ Project Repository Factory: Using provided user_id: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
2025-09-23 05:43:33,401 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - [ProjectRepositoryFactory] Database available, using ORM
2025-09-23 05:43:33,401 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - Created repository: orm for user: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
2025-09-23 05:43:33,401 - fastmcp.task_management.application.services.project_management_service - INFO - ProjectManagementService initialized with PostgreSQL/ORM repository
2025-09-23 05:43:33,402 - fastmcp.task_management.application.factories.project_facade_factory - INFO - Created new project facade for 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
2025-09-23 05:43:33,403 - fastmcp.task_management.infrastructure.repositories.base_orm_repository - ERROR - Database error: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('493b0f39-e66f-43da-86c3-988c58fea116', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:43:33,403 - fastmcp.task_management.infrastructure.repositories.orm.project_repository - ERROR - Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('493b0f39-e66f-43da-86c3-988c58fea116', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log call -------------------------------
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service:authentication_service.py:54 üîç JWT authentication check for operation: manage_project:create
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service:authentication_service.py:58 ‚úÖ Using JWT user_id from HTTP server: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.auth_helper:auth_helper.py:55 üîê Authenticated user: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef for operation: manage_project:create
INFO     fastmcp.task_management.application.factories.project_facade_factory:project_facade_factory.py:77 ProjectFacadeFactory initialized
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:56 üîç Project Repository Factory: Creating repository with user_id: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:57 üîß Repository type: None, db_path: None
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:64 ‚úÖ Project Repository Factory: Using provided user_id: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:123 [ProjectRepositoryFactory] Database available, using ORM
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:94 Created repository: orm for user: 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
INFO     fastmcp.task_management.application.services.project_management_service:project_management_service.py:58 ProjectManagementService initialized with PostgreSQL/ORM repository
INFO     fastmcp.task_management.application.factories.project_facade_factory:project_facade_factory.py:118 Created new project facade for 8c251274-0af2-4f65-9f0e-9ab0b59ba6ef
ERROR    fastmcp.task_management.infrastructure.repositories.base_orm_repository:base_orm_repository.py:68 Database error: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('493b0f39-e66f-43da-86c3-988c58fea116', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR    fastmcp.task_management.infrastructure.repositories.orm.project_repository:project_repository.py:170 Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('493b0f39-e66f-43da-86c3-988c58fea116', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
__________ TestMCPAuthenticationFixes.test_git_branch_operations_work __________
src/tests/integration/test_mcp_authentication_fixes.py:147: in test_git_branch_operations_work
    assert project_result.get('success') is True, f"Project creation failed: {project_result.get('error')}"
E   AssertionError: Project creation failed: Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
E     [SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
E     FROM projects 
E     WHERE projects.id = ?
E      LIMIT ? OFFSET ?]
E     [parameters: ('0337ab39-0337-46ef-832e-6130419ad659', 1, 0)]
E     (Background on this error at: https://sqlalche.me/e/20/e3q8)
E   assert False is True
E    +  where False = <built-in method get of dict object at 0x755eb9683700>('success')
E    +    where <built-in method get of dict object at 0x755eb9683700> = {'error': "Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error\n[SQL: SELECT ...-0337-46ef-832e-6130419ad659', 1, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", 'success': False}.get
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:43:33,407 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:43:33,408 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:43:33,409 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:43:33,417 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:43:33,417 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:43:33,417 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:43:33,417 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:43:33,417 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:43:33,417 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:43:33,417 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:43:33,428 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:43:33,428 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:43:33,429 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:43:33,429 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:43:33,429 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:43:33,433 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:43:33,434 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:43:33,441 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:43:33,442 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:43:33,445 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:43:33,446 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:43:33,452 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:43:33,453 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:43:33,458 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:43:33,459 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:43:33,459 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:43:33,459 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:43:33,459 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:43:33,459 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:43:33,459 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 43, 33, 459733, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 43, 33, 459734, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:43:33,460 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Initializing DDD-compliant MCP tools...
2025-09-23 05:43:33,460 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - PathResolver initialized for project: /home/daihungpham/__projects__/4genthub/agenthub_main
2025-09-23 05:43:33,460 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - Brain directory: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain
2025-09-23 05:43:33,460 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - Projects file: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain/projects.json
2025-09-23 05:43:33,460 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Database connection established successfully
2025-09-23 05:43:33,460 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,460 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.operation_factory - INFO - OperationFactory initialized with all handlers including AI
2025-09-23 05:43:33,460 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.validation_factory - INFO - ValidationFactory initialized with all validators
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.response_factory - INFO - ResponseFactory initialized
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service - INFO - EnhancementService initialized
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer - INFO - WorkflowHintEnhancer initialized with modular architecture
2025-09-23 05:43:33,461 - fastmcp.task_management.application.services.parameter_enforcement_service - INFO - ParameterEnforcementService initialized with level: warning
2025-09-23 05:43:33,461 - fastmcp.task_management.application.services.progressive_enforcement_service - INFO - ProgressiveEnforcementService initialized with default level: warning
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.task_mcp_controller - INFO - TaskMCPController initialized with modular architecture
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.factories.operation_factory - INFO - SubtaskOperationFactory initialized with all handlers
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.subtask_mcp_controller - INFO - SubtaskMCPController initialized with modular architecture and progress tracking
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.unified_context_controller.factories.operation_factory - INFO - ContextOperationFactory initialized with modular handler
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.unified_context_controller.unified_context_controller - INFO - UnifiedContextMCPController initialized with modular architecture
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.factories.operation_factory - INFO - ProjectOperationFactory initialized with modular handlers
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.project_mcp_controller - INFO - ProjectMCPController initialized with modular architecture
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.factories.operation_factory - INFO - AgentOperationFactory initialized with modular handlers
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.agent_mcp_controller - INFO - AgentMCPController initialized with modular architecture (factory pattern and workflow guidance)
2025-09-23 05:43:33,461 - root - INFO - Agent factory initialized with path: /home/daihungpham/__projects__/4genthub/agenthub_main/agent-library
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.handlers.agent_invocation_handler - INFO - AgentInvocationHandler initialized
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.call_agent_mcp_controller - INFO - CallAgentMCPController initialized
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Vision System disabled - using standard workflow without enhanced features
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service - INFO - EnhancementService initialized
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer - INFO - WorkflowHintEnhancer initialized with modular architecture
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Standard workflow controllers initialized successfully.
2025-09-23 05:43:33,461 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - DDD-compliant MCP tools initialized successfully.
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:83 Initializing DDD-compliant MCP tools...
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:54 PathResolver initialized for project: /home/daihungpham/__projects__/4genthub/agenthub_main
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:55 Brain directory: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:56 Projects file: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain/projects.json
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:98 Database connection established successfully
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.operation_factory:operation_factory.py:33 OperationFactory initialized with all handlers including AI
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.validation_factory:validation_factory.py:29 ValidationFactory initialized with all validators
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.response_factory:response_factory.py:20 ResponseFactory initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service:enhancement_service.py:18 EnhancementService initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer:workflow_hint_enhancer.py:36 WorkflowHintEnhancer initialized with modular architecture
INFO     fastmcp.task_management.application.services.parameter_enforcement_service:parameter_enforcement_service.py:121 ParameterEnforcementService initialized with level: warning
INFO     fastmcp.task_management.application.services.progressive_enforcement_service:progressive_enforcement_service.py:145 ProgressiveEnforcementService initialized with default level: warning
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.task_mcp_controller:task_mcp_controller.py:177 TaskMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.factories.operation_factory:operation_factory.py:38 SubtaskOperationFactory initialized with all handlers
INFO     fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.subtask_mcp_controller:subtask_mcp_controller.py:117 SubtaskMCPController initialized with modular architecture and progress tracking
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.unified_context_controller.factories.operation_factory:operation_factory.py:23 ContextOperationFactory initialized with modular handler
INFO     fastmcp.task_management.interface.mcp_controllers.unified_context_controller.unified_context_controller:unified_context_controller.py:50 UnifiedContextMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.factories.operation_factory:operation_factory.py:27 ProjectOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.project_mcp_controller:project_mcp_controller.py:112 ProjectMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.factories.operation_factory:operation_factory.py:29 AgentOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.agent_mcp_controller:agent_mcp_controller.py:80 AgentMCPController initialized with modular architecture (factory pattern and workflow guidance)
INFO     root:call_agent.py:316 Agent factory initialized with path: /home/daihungpham/__projects__/4genthub/agenthub_main/agent-library
INFO     fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.handlers.agent_invocation_handler:agent_invocation_handler.py:20 AgentInvocationHandler initialized
INFO     fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.call_agent_mcp_controller:call_agent_mcp_controller.py:37 CallAgentMCPController initialized
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:181 Vision System disabled - using standard workflow without enhanced features
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service:enhancement_service.py:18 EnhancementService initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer:workflow_hint_enhancer.py:36 WorkflowHintEnhancer initialized with modular architecture
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:195 Standard workflow controllers initialized successfully.
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:197 DDD-compliant MCP tools initialized successfully.
----------------------------- Captured stdout call -----------------------------
2025-09-23 05:43:33,462 - fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service - INFO - üîç JWT authentication check for operation: manage_project:create
2025-09-23 05:43:33,462 - fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service - INFO - ‚úÖ Using JWT user_id from HTTP server: 63be3db1-65ef-4a4a-9b18-409e882ee1f4
2025-09-23 05:43:33,462 - fastmcp.task_management.interface.mcp_controllers.auth_helper.auth_helper - INFO - üîê Authenticated user: 63be3db1-65ef-4a4a-9b18-409e882ee1f4 for operation: manage_project:create
2025-09-23 05:43:33,462 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - üîç Project Repository Factory: Creating repository with user_id: 63be3db1-65ef-4a4a-9b18-409e882ee1f4
2025-09-23 05:43:33,462 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - üîß Repository type: None, db_path: None
DEBUG: ProjectRepositoryFactory.create called with user_id=63be3db1-65ef-4a4a-9b18-409e882ee1f4
2025-09-23 05:43:33,462 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - ‚úÖ Project Repository Factory: Using provided user_id: 63be3db1-65ef-4a4a-9b18-409e882ee1f4
2025-09-23 05:43:33,462 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - [ProjectRepositoryFactory] Database available, using ORM
2025-09-23 05:43:33,462 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - Created repository: orm for user: 63be3db1-65ef-4a4a-9b18-409e882ee1f4
2025-09-23 05:43:33,462 - fastmcp.task_management.application.services.project_management_service - INFO - ProjectManagementService initialized with PostgreSQL/ORM repository
2025-09-23 05:43:33,462 - fastmcp.task_management.application.factories.project_facade_factory - INFO - Created new project facade for 63be3db1-65ef-4a4a-9b18-409e882ee1f4
2025-09-23 05:43:33,463 - fastmcp.task_management.infrastructure.repositories.base_orm_repository - ERROR - Database error: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('0337ab39-0337-46ef-832e-6130419ad659', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:43:33,464 - fastmcp.task_management.infrastructure.repositories.orm.project_repository - ERROR - Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('0337ab39-0337-46ef-832e-6130419ad659', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log call -------------------------------
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service:authentication_service.py:54 üîç JWT authentication check for operation: manage_project:create
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service:authentication_service.py:58 ‚úÖ Using JWT user_id from HTTP server: 63be3db1-65ef-4a4a-9b18-409e882ee1f4
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.auth_helper:auth_helper.py:55 üîê Authenticated user: 63be3db1-65ef-4a4a-9b18-409e882ee1f4 for operation: manage_project:create
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:56 üîç Project Repository Factory: Creating repository with user_id: 63be3db1-65ef-4a4a-9b18-409e882ee1f4
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:57 üîß Repository type: None, db_path: None
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:64 ‚úÖ Project Repository Factory: Using provided user_id: 63be3db1-65ef-4a4a-9b18-409e882ee1f4
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:123 [ProjectRepositoryFactory] Database available, using ORM
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:94 Created repository: orm for user: 63be3db1-65ef-4a4a-9b18-409e882ee1f4
INFO     fastmcp.task_management.application.services.project_management_service:project_management_service.py:58 ProjectManagementService initialized with PostgreSQL/ORM repository
INFO     fastmcp.task_management.application.factories.project_facade_factory:project_facade_factory.py:118 Created new project facade for 63be3db1-65ef-4a4a-9b18-409e882ee1f4
ERROR    fastmcp.task_management.infrastructure.repositories.base_orm_repository:base_orm_repository.py:68 Database error: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('0337ab39-0337-46ef-832e-6130419ad659', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR    fastmcp.task_management.infrastructure.repositories.orm.project_repository:project_repository.py:170 Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('0337ab39-0337-46ef-832e-6130419ad659', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
__________ TestMCPAuthenticationFixes.test_full_workflow_integration ___________
src/tests/integration/test_mcp_authentication_fixes.py:232: in test_full_workflow_integration
    assert project_result.get('success') is True, f"Project creation failed: {project_result.get('error')}"
E   AssertionError: Project creation failed: Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
E     [SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
E     FROM projects 
E     WHERE projects.id = ?
E      LIMIT ? OFFSET ?]
E     [parameters: ('bfa02f14-6a25-47a8-b2cc-e4f4c293285d', 1, 0)]
E     (Background on this error at: https://sqlalche.me/e/20/e3q8)
E   assert False is True
E    +  where False = <built-in method get of dict object at 0x755eb8bc4b00>('success')
E    +    where <built-in method get of dict object at 0x755eb8bc4b00> = {'error': "Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error\n[SQL: SELECT ...-6a25-47a8-b2cc-e4f4c293285d', 1, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", 'success': False}.get
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:43:33,522 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:43:33,522 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:43:33,522 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:43:33,523 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:43:33,527 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:43:33,527 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:43:33,527 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:43:33,527 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:43:33,527 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:43:33,527 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:43:33,527 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:43:33,538 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:43:33,538 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:43:33,539 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:43:33,539 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:43:33,539 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:43:33,542 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:43:33,544 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:43:33,552 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:43:33,553 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:43:33,556 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:43:33,557 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:43:33,566 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:43:33,568 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:43:33,575 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:43:33,575 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:43:33,575 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:43:33,575 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:43:33,575 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:43:33,575 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:43:33,575 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 43, 33, 575829, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 43, 33, 575831, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:43:33,576 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Initializing DDD-compliant MCP tools...
2025-09-23 05:43:33,576 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - PathResolver initialized for project: /home/daihungpham/__projects__/4genthub/agenthub_main
2025-09-23 05:43:33,576 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - Brain directory: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain
2025-09-23 05:43:33,576 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - Projects file: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain/projects.json
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Database connection established successfully
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.operation_factory - INFO - OperationFactory initialized with all handlers including AI
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.validation_factory - INFO - ValidationFactory initialized with all validators
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.response_factory - INFO - ResponseFactory initialized
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service - INFO - EnhancementService initialized
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer - INFO - WorkflowHintEnhancer initialized with modular architecture
2025-09-23 05:43:33,577 - fastmcp.task_management.application.services.parameter_enforcement_service - INFO - ParameterEnforcementService initialized with level: warning
2025-09-23 05:43:33,577 - fastmcp.task_management.application.services.progressive_enforcement_service - INFO - ProgressiveEnforcementService initialized with default level: warning
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.task_mcp_controller - INFO - TaskMCPController initialized with modular architecture
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.factories.operation_factory - INFO - SubtaskOperationFactory initialized with all handlers
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.subtask_mcp_controller - INFO - SubtaskMCPController initialized with modular architecture and progress tracking
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.unified_context_controller.factories.operation_factory - INFO - ContextOperationFactory initialized with modular handler
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.unified_context_controller.unified_context_controller - INFO - UnifiedContextMCPController initialized with modular architecture
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.factories.operation_factory - INFO - ProjectOperationFactory initialized with modular handlers
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.project_mcp_controller - INFO - ProjectMCPController initialized with modular architecture
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.factories.operation_factory - INFO - AgentOperationFactory initialized with modular handlers
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.agent_mcp_controller - INFO - AgentMCPController initialized with modular architecture (factory pattern and workflow guidance)
2025-09-23 05:43:33,577 - root - INFO - Agent factory initialized with path: /home/daihungpham/__projects__/4genthub/agenthub_main/agent-library
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.handlers.agent_invocation_handler - INFO - AgentInvocationHandler initialized
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.call_agent_mcp_controller - INFO - CallAgentMCPController initialized
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Vision System disabled - using standard workflow without enhanced features
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service - INFO - EnhancementService initialized
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer - INFO - WorkflowHintEnhancer initialized with modular architecture
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Standard workflow controllers initialized successfully.
2025-09-23 05:43:33,577 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - DDD-compliant MCP tools initialized successfully.
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:83 Initializing DDD-compliant MCP tools...
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:54 PathResolver initialized for project: /home/daihungpham/__projects__/4genthub/agenthub_main
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:55 Brain directory: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:56 Projects file: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain/projects.json
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:98 Database connection established successfully
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.operation_factory:operation_factory.py:33 OperationFactory initialized with all handlers including AI
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.validation_factory:validation_factory.py:29 ValidationFactory initialized with all validators
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.response_factory:response_factory.py:20 ResponseFactory initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service:enhancement_service.py:18 EnhancementService initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer:workflow_hint_enhancer.py:36 WorkflowHintEnhancer initialized with modular architecture
INFO     fastmcp.task_management.application.services.parameter_enforcement_service:parameter_enforcement_service.py:121 ParameterEnforcementService initialized with level: warning
INFO     fastmcp.task_management.application.services.progressive_enforcement_service:progressive_enforcement_service.py:145 ProgressiveEnforcementService initialized with default level: warning
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.task_mcp_controller:task_mcp_controller.py:177 TaskMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.factories.operation_factory:operation_factory.py:38 SubtaskOperationFactory initialized with all handlers
INFO     fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.subtask_mcp_controller:subtask_mcp_controller.py:117 SubtaskMCPController initialized with modular architecture and progress tracking
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.unified_context_controller.factories.operation_factory:operation_factory.py:23 ContextOperationFactory initialized with modular handler
INFO     fastmcp.task_management.interface.mcp_controllers.unified_context_controller.unified_context_controller:unified_context_controller.py:50 UnifiedContextMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.factories.operation_factory:operation_factory.py:27 ProjectOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.project_mcp_controller:project_mcp_controller.py:112 ProjectMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.factories.operation_factory:operation_factory.py:29 AgentOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.agent_mcp_controller:agent_mcp_controller.py:80 AgentMCPController initialized with modular architecture (factory pattern and workflow guidance)
INFO     root:call_agent.py:316 Agent factory initialized with path: /home/daihungpham/__projects__/4genthub/agenthub_main/agent-library
INFO     fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.handlers.agent_invocation_handler:agent_invocation_handler.py:20 AgentInvocationHandler initialized
INFO     fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.call_agent_mcp_controller:call_agent_mcp_controller.py:37 CallAgentMCPController initialized
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:181 Vision System disabled - using standard workflow without enhanced features
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service:enhancement_service.py:18 EnhancementService initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer:workflow_hint_enhancer.py:36 WorkflowHintEnhancer initialized with modular architecture
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:195 Standard workflow controllers initialized successfully.
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:197 DDD-compliant MCP tools initialized successfully.
----------------------------- Captured stdout call -----------------------------
2025-09-23 05:43:33,578 - fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service - INFO - üîç JWT authentication check for operation: manage_project:create
2025-09-23 05:43:33,578 - fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service - INFO - ‚úÖ Using JWT user_id from HTTP server: 59ab8fc2-2331-46a5-ad87-f982197b3283
2025-09-23 05:43:33,578 - fastmcp.task_management.interface.mcp_controllers.auth_helper.auth_helper - INFO - üîê Authenticated user: 59ab8fc2-2331-46a5-ad87-f982197b3283 for operation: manage_project:create
2025-09-23 05:43:33,578 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - üîç Project Repository Factory: Creating repository with user_id: 59ab8fc2-2331-46a5-ad87-f982197b3283
2025-09-23 05:43:33,578 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - üîß Repository type: None, db_path: None
DEBUG: ProjectRepositoryFactory.create called with user_id=59ab8fc2-2331-46a5-ad87-f982197b3283
2025-09-23 05:43:33,578 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - ‚úÖ Project Repository Factory: Using provided user_id: 59ab8fc2-2331-46a5-ad87-f982197b3283
2025-09-23 05:43:33,578 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - [ProjectRepositoryFactory] Database available, using ORM
2025-09-23 05:43:33,578 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - Created repository: orm for user: 59ab8fc2-2331-46a5-ad87-f982197b3283
2025-09-23 05:43:33,578 - fastmcp.task_management.application.services.project_management_service - INFO - ProjectManagementService initialized with PostgreSQL/ORM repository
2025-09-23 05:43:33,578 - fastmcp.task_management.application.factories.project_facade_factory - INFO - Created new project facade for 59ab8fc2-2331-46a5-ad87-f982197b3283
2025-09-23 05:43:33,580 - fastmcp.task_management.infrastructure.repositories.base_orm_repository - ERROR - Database error: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('bfa02f14-6a25-47a8-b2cc-e4f4c293285d', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:43:33,580 - fastmcp.task_management.infrastructure.repositories.orm.project_repository - ERROR - Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('bfa02f14-6a25-47a8-b2cc-e4f4c293285d', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log call -------------------------------
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service:authentication_service.py:54 üîç JWT authentication check for operation: manage_project:create
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service:authentication_service.py:58 ‚úÖ Using JWT user_id from HTTP server: 59ab8fc2-2331-46a5-ad87-f982197b3283
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.auth_helper:auth_helper.py:55 üîê Authenticated user: 59ab8fc2-2331-46a5-ad87-f982197b3283 for operation: manage_project:create
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:56 üîç Project Repository Factory: Creating repository with user_id: 59ab8fc2-2331-46a5-ad87-f982197b3283
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:57 üîß Repository type: None, db_path: None
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:64 ‚úÖ Project Repository Factory: Using provided user_id: 59ab8fc2-2331-46a5-ad87-f982197b3283
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:123 [ProjectRepositoryFactory] Database available, using ORM
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:94 Created repository: orm for user: 59ab8fc2-2331-46a5-ad87-f982197b3283
INFO     fastmcp.task_management.application.services.project_management_service:project_management_service.py:58 ProjectManagementService initialized with PostgreSQL/ORM repository
INFO     fastmcp.task_management.application.factories.project_facade_factory:project_facade_factory.py:118 Created new project facade for 59ab8fc2-2331-46a5-ad87-f982197b3283
ERROR    fastmcp.task_management.infrastructure.repositories.base_orm_repository:base_orm_repository.py:68 Database error: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('bfa02f14-6a25-47a8-b2cc-e4f4c293285d', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR    fastmcp.task_management.infrastructure.repositories.orm.project_repository:project_repository.py:170 Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('bfa02f14-6a25-47a8-b2cc-e4f4c293285d', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
__________ TestMCPAuthenticationFixes.test_authentication_error_cases __________
src/tests/integration/test_mcp_authentication_fixes.py:314: in test_authentication_error_cases
    assert project_result.get('success') is True, f"Project creation failed: {project_result.get('error')}"
E   AssertionError: Project creation failed: Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
E     [SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
E     FROM projects 
E     WHERE projects.id = ?
E      LIMIT ? OFFSET ?]
E     [parameters: ('e62c9239-5efe-4331-8ca4-84b4be5d5934', 1, 0)]
E     (Background on this error at: https://sqlalche.me/e/20/e3q8)
E   assert False is True
E    +  where False = <built-in method get of dict object at 0x755eb8b80740>('success')
E    +    where <built-in method get of dict object at 0x755eb8b80740> = {'error': "Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error\n[SQL: SELECT ...-5efe-4331-8ca4-84b4be5d5934', 1, 0)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)", 'success': False}.get
---------------------------- Captured stdout setup -----------------------------
2025-09-23 05:43:33,587 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - DatabaseSourceManager singleton cleared
2025-09-23 05:43:33,587 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed
2025-09-23 05:43:33,587 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database connections closed

üì¶ Using sqlite test database
üìä DATABASE_TYPE: sqlite
üîó MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:43:33,587 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - üì¶ Using SQLite database for test execution
2025-09-23 05:43:33,588 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Detected TEST mode (pytest)
2025-09-23 05:43:33,588 - fastmcp.task_management.infrastructure.database.database_source_manager - INFO - Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
2025-09-23 05:43:33,588 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Initializing database: /tmp/agenthub_test.db
2025-09-23 05:43:33,588 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ SQLite mode for test execution
2025-09-23 05:43:33,588 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database type: sqlite
2025-09-23 05:43:33,588 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:43:33,588 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Creating SQLite engine for test execution
2025-09-23 05:43:33,588 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ SQLite engine created for tests
2025-09-23 05:43:33,592 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Connected to SQLite: 3.45.1
2025-09-23 05:43:33,593 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:43:33,593 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table tasks does not exist yet. Will be created by ORM.
2025-09-23 05:43:33,593 - fastmcp.task_management.infrastructure.database.ensure_ai_columns - WARNING - Table subtasks does not exist yet. Will be created by ORM.
2025-09-23 05:43:33,593 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified in database
2025-09-23 05:43:33,593 - fastmcp.task_management.infrastructure.database.init_database - INFO - Initializing database: sqlite
2025-09-23 05:43:33,593 - fastmcp.task_management.infrastructure.database.database_config - INFO - Creating database tables...
2025-09-23 05:43:33,604 - fastmcp.task_management.infrastructure.database.database_config - INFO - Database tables created successfully
2025-09-23 05:43:33,604 - fastmcp.task_management.infrastructure.database.database_config - INFO - Ensuring AI columns exist in database...
2025-09-23 05:43:33,604 - fastmcp.task_management.infrastructure.database.database_config - INFO - ‚úÖ AI columns verified/created successfully
2025-09-23 05:43:33,604 - fastmcp.task_management.infrastructure.database.init_database - INFO - Running automatic database migrations...
2025-09-23 05:43:33,605 - fastmcp.task_management.infrastructure.database.database_config - INFO - üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
2025-09-23 05:43:33,614 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Created migrations tracking table: applied_migrations
2025-09-23 05:43:33,616 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: branch_summaries_mv
2025-09-23 05:43:33,624 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: branch_summaries_mv
2025-09-23 05:43:33,625 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: project_summaries_mv
2025-09-23 05:43:33,629 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: project_summaries_mv
2025-09-23 05:43:33,630 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: websocket_indexes
2025-09-23 05:43:33,636 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: websocket_indexes
2025-09-23 05:43:33,637 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Running migration: cascade_indexes
2025-09-23 05:43:33,642 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Successfully applied migration: cascade_indexes
2025-09-23 05:43:33,642 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database migration check completed
2025-09-23 05:43:33,642 - fastmcp.task_management.infrastructure.database.migration_runner - INFO - Database initialization completed
2025-09-23 05:43:33,642 - fastmcp.task_management.infrastructure.database.init_database - INFO - Migration runner completed successfully
2025-09-23 05:43:33,643 - fastmcp.task_management.infrastructure.database.init_database - INFO - Automatic migrations completed successfully
2025-09-23 05:43:33,643 - fastmcp.task_management.infrastructure.database.init_database - INFO - Database initialization completed successfully
2025-09-23 05:43:33,643 - fastmcp.task_management.infrastructure.database.database_initializer - INFO - Database initialized successfully: /tmp/agenthub_test.db
‚ö†Ô∏è Error initializing test data: (sqlite3.OperationalError) disk I/O error
[SQL: 
                    INSERT INTO projects (id, name, description, user_id, status, created_at, updated_at, metadata) 
                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)
                    ON CONFLICT (id) DO UPDATE SET 
                        name = EXCLUDED.name,
                        description = EXCLUDED.description,
                        updated_at = EXCLUDED.updated_at
                ]
[parameters: ('default_project', 'Default Test Project', 'Project for testing', 'default_id', 'active', datetime.datetime(2025, 9, 23, 3, 43, 33, 643667, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 9, 23, 3, 43, 33, 643668, tzinfo=datetime.timezone.utc), '{}')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:43:33,644 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Initializing DDD-compliant MCP tools...
2025-09-23 05:43:33,644 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - PathResolver initialized for project: /home/daihungpham/__projects__/4genthub/agenthub_main
2025-09-23 05:43:33,644 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - Brain directory: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain
2025-09-23 05:43:33,644 - fastmcp.task_management.infrastructure.utilities.path_resolver - INFO - Projects file: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain/projects.json
2025-09-23 05:43:33,644 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Database connection established successfully
2025-09-23 05:43:33,644 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,644 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.operation_factory - INFO - OperationFactory initialized with all handlers including AI
2025-09-23 05:43:33,644 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.validation_factory - INFO - ValidationFactory initialized with all validators
2025-09-23 05:43:33,644 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.response_factory - INFO - ResponseFactory initialized
2025-09-23 05:43:33,644 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service - INFO - EnhancementService initialized
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer - INFO - WorkflowHintEnhancer initialized with modular architecture
2025-09-23 05:43:33,645 - fastmcp.task_management.application.services.parameter_enforcement_service - INFO - ParameterEnforcementService initialized with level: warning
2025-09-23 05:43:33,645 - fastmcp.task_management.application.services.progressive_enforcement_service - INFO - ProgressiveEnforcementService initialized with default level: warning
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.task_mcp_controller - INFO - TaskMCPController initialized with modular architecture
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.factories.operation_factory - INFO - SubtaskOperationFactory initialized with all handlers
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.subtask_mcp_controller - INFO - SubtaskMCPController initialized with modular architecture and progress tracking
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.unified_context_controller.factories.operation_factory - INFO - ContextOperationFactory initialized with modular handler
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.unified_context_controller.unified_context_controller - INFO - UnifiedContextMCPController initialized with modular architecture
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.factories.operation_factory - INFO - ProjectOperationFactory initialized with modular handlers
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.project_mcp_controller - INFO - ProjectMCPController initialized with modular architecture
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory - INFO - GitBranchOperationFactory initialized with modular handlers
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller - INFO - GitBranchMCPController initialized with modular architecture
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.utils.response_formatter - INFO - Response optimization is ENABLED
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.factories.operation_factory - INFO - AgentOperationFactory initialized with modular handlers
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.agent_mcp_controller - INFO - AgentMCPController initialized with modular architecture (factory pattern and workflow guidance)
2025-09-23 05:43:33,645 - root - INFO - Agent factory initialized with path: /home/daihungpham/__projects__/4genthub/agenthub_main/agent-library
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.handlers.agent_invocation_handler - INFO - AgentInvocationHandler initialized
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.call_agent_mcp_controller - INFO - CallAgentMCPController initialized
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Vision System disabled - using standard workflow without enhanced features
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service - INFO - EnhancementService initialized
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer - INFO - WorkflowHintEnhancer initialized with modular architecture
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - Standard workflow controllers initialized successfully.
2025-09-23 05:43:33,645 - fastmcp.task_management.interface.ddd_compliant_mcp_tools - INFO - DDD-compliant MCP tools initialized successfully.
------------------------------ Captured log setup ------------------------------
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:260 DatabaseSourceManager singleton cleared
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:495 Database connections closed
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:91 üì¶ Using SQLite database for test execution
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:73 Detected TEST mode (pytest)
INFO     fastmcp.task_management.infrastructure.database.database_source_manager:database_source_manager.py:128 Database path set from MCP_DB_PATH: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:110 Initializing database: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:182 üì¶ SQLite mode for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:200 Database type: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:310 üì¶ Creating SQLite engine for test execution
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:328 ‚úÖ SQLite engine created for tests
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:400 üì¶ Connected to SQLite: 3.45.1
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:437 Ensuring AI columns exist in database...
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table tasks does not exist yet. Will be created by ORM.
WARNING  fastmcp.task_management.infrastructure.database.ensure_ai_columns:ensure_ai_columns.py:48 Table subtasks does not exist yet. Will be created by ORM.
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:439 ‚úÖ AI columns verified in database
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:37 Initializing database: sqlite
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:473 Creating database tables...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:475 Database tables created successfully
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:479 Ensuring AI columns exist in database...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:481 ‚úÖ AI columns verified/created successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:44 Running automatic database migrations...
INFO     fastmcp.task_management.infrastructure.database.database_config:database_config.py:272 üì¶ Using SQLite database for tests: /tmp/agenthub_test.db
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:84 Created migrations tracking table: applied_migrations
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: branch_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: project_summaries_mv
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: websocket_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:124 Running migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:127 Successfully applied migration: cascade_indexes
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:32 Database migration check completed
INFO     fastmcp.task_management.infrastructure.database.migration_runner:migration_runner.py:502 Database initialization completed
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:120 Migration runner completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:46 Automatic migrations completed successfully
INFO     fastmcp.task_management.infrastructure.database.init_database:init_database.py:52 Database initialization completed successfully
INFO     fastmcp.task_management.infrastructure.database.database_initializer:database_initializer.py:118 Database initialized successfully: /tmp/agenthub_test.db
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:83 Initializing DDD-compliant MCP tools...
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:54 PathResolver initialized for project: /home/daihungpham/__projects__/4genthub/agenthub_main
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:55 Brain directory: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain
INFO     fastmcp.task_management.infrastructure.utilities.path_resolver:path_resolver.py:56 Projects file: /home/daihungpham/__projects__/4genthub/agenthub_main/.cursor/rules/brain/projects.json
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:98 Database connection established successfully
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.operation_factory:operation_factory.py:33 OperationFactory initialized with all handlers including AI
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.validation_factory:validation_factory.py:29 ValidationFactory initialized with all validators
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.factories.response_factory:response_factory.py:20 ResponseFactory initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service:enhancement_service.py:18 EnhancementService initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer:workflow_hint_enhancer.py:36 WorkflowHintEnhancer initialized with modular architecture
INFO     fastmcp.task_management.application.services.parameter_enforcement_service:parameter_enforcement_service.py:121 ParameterEnforcementService initialized with level: warning
INFO     fastmcp.task_management.application.services.progressive_enforcement_service:progressive_enforcement_service.py:145 ProgressiveEnforcementService initialized with default level: warning
INFO     fastmcp.task_management.interface.mcp_controllers.task_mcp_controller.task_mcp_controller:task_mcp_controller.py:177 TaskMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.factories.operation_factory:operation_factory.py:38 SubtaskOperationFactory initialized with all handlers
INFO     fastmcp.task_management.interface.mcp_controllers.subtask_mcp_controller.subtask_mcp_controller:subtask_mcp_controller.py:117 SubtaskMCPController initialized with modular architecture and progress tracking
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.unified_context_controller.factories.operation_factory:operation_factory.py:23 ContextOperationFactory initialized with modular handler
INFO     fastmcp.task_management.interface.mcp_controllers.unified_context_controller.unified_context_controller:unified_context_controller.py:50 UnifiedContextMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.factories.operation_factory:operation_factory.py:27 ProjectOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.project_mcp_controller.project_mcp_controller:project_mcp_controller.py:112 ProjectMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.factories.operation_factory:operation_factory.py:29 GitBranchOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.git_branch_mcp_controller.git_branch_mcp_controller:git_branch_mcp_controller.py:89 GitBranchMCPController initialized with modular architecture
INFO     fastmcp.task_management.interface.utils.response_formatter:response_formatter.py:49 Response optimization is ENABLED
INFO     fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.factories.operation_factory:operation_factory.py:29 AgentOperationFactory initialized with modular handlers
INFO     fastmcp.task_management.interface.mcp_controllers.agent_mcp_controller.agent_mcp_controller:agent_mcp_controller.py:80 AgentMCPController initialized with modular architecture (factory pattern and workflow guidance)
INFO     root:call_agent.py:316 Agent factory initialized with path: /home/daihungpham/__projects__/4genthub/agenthub_main/agent-library
INFO     fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.handlers.agent_invocation_handler:agent_invocation_handler.py:20 AgentInvocationHandler initialized
INFO     fastmcp.task_management.interface.mcp_controllers.call_agent_mcp_controller.call_agent_mcp_controller:call_agent_mcp_controller.py:37 CallAgentMCPController initialized
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:181 Vision System disabled - using standard workflow without enhanced features
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.services.enhancement_service:enhancement_service.py:18 EnhancementService initialized
INFO     fastmcp.task_management.interface.mcp_controllers.workflow_hint_enhancer.workflow_hint_enhancer:workflow_hint_enhancer.py:36 WorkflowHintEnhancer initialized with modular architecture
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:195 Standard workflow controllers initialized successfully.
INFO     fastmcp.task_management.interface.ddd_compliant_mcp_tools:ddd_compliant_mcp_tools.py:197 DDD-compliant MCP tools initialized successfully.
----------------------------- Captured stdout call -----------------------------
2025-09-23 05:43:33,646 - fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service - INFO - üîç JWT authentication check for operation: manage_project:create
2025-09-23 05:43:33,646 - fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service - INFO - ‚úÖ Using JWT user_id from HTTP server: 6ba14b75-8e2e-4300-82fe-6332267dae1f
2025-09-23 05:43:33,646 - fastmcp.task_management.interface.mcp_controllers.auth_helper.auth_helper - INFO - üîê Authenticated user: 6ba14b75-8e2e-4300-82fe-6332267dae1f for operation: manage_project:create
2025-09-23 05:43:33,646 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - üîç Project Repository Factory: Creating repository with user_id: 6ba14b75-8e2e-4300-82fe-6332267dae1f
2025-09-23 05:43:33,646 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - üîß Repository type: None, db_path: None
DEBUG: ProjectRepositoryFactory.create called with user_id=6ba14b75-8e2e-4300-82fe-6332267dae1f
2025-09-23 05:43:33,646 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - ‚úÖ Project Repository Factory: Using provided user_id: 6ba14b75-8e2e-4300-82fe-6332267dae1f
2025-09-23 05:43:33,646 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - [ProjectRepositoryFactory] Database available, using ORM
2025-09-23 05:43:33,646 - fastmcp.task_management.infrastructure.repositories.project_repository_factory - INFO - Created repository: orm for user: 6ba14b75-8e2e-4300-82fe-6332267dae1f
2025-09-23 05:43:33,646 - fastmcp.task_management.application.services.project_management_service - INFO - ProjectManagementService initialized with PostgreSQL/ORM repository
2025-09-23 05:43:33,646 - fastmcp.task_management.application.factories.project_facade_factory - INFO - Created new project facade for 6ba14b75-8e2e-4300-82fe-6332267dae1f
2025-09-23 05:43:33,647 - fastmcp.task_management.infrastructure.repositories.base_orm_repository - ERROR - Database error: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('e62c9239-5efe-4331-8ca4-84b4be5d5934', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-23 05:43:33,648 - fastmcp.task_management.infrastructure.repositories.orm.project_repository - ERROR - Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('e62c9239-5efe-4331-8ca4-84b4be5d5934', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
------------------------------ Captured log call -------------------------------
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service:authentication_service.py:54 üîç JWT authentication check for operation: manage_project:create
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.services.authentication_service:authentication_service.py:58 ‚úÖ Using JWT user_id from HTTP server: 6ba14b75-8e2e-4300-82fe-6332267dae1f
INFO     fastmcp.task_management.interface.mcp_controllers.auth_helper.auth_helper:auth_helper.py:55 üîê Authenticated user: 6ba14b75-8e2e-4300-82fe-6332267dae1f for operation: manage_project:create
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:56 üîç Project Repository Factory: Creating repository with user_id: 6ba14b75-8e2e-4300-82fe-6332267dae1f
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:57 üîß Repository type: None, db_path: None
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:64 ‚úÖ Project Repository Factory: Using provided user_id: 6ba14b75-8e2e-4300-82fe-6332267dae1f
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:123 [ProjectRepositoryFactory] Database available, using ORM
INFO     fastmcp.task_management.infrastructure.repositories.project_repository_factory:project_repository_factory.py:94 Created repository: orm for user: 6ba14b75-8e2e-4300-82fe-6332267dae1f
INFO     fastmcp.task_management.application.services.project_management_service:project_management_service.py:58 ProjectManagementService initialized with PostgreSQL/ORM repository
INFO     fastmcp.task_management.application.factories.project_facade_factory:project_facade_factory.py:118 Created new project facade for 6ba14b75-8e2e-4300-82fe-6332267dae1f
ERROR    fastmcp.task_management.infrastructure.repositories.base_orm_repository:base_orm_repository.py:68 Database error: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('e62c9239-5efe-4331-8ca4-84b4be5d5934', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR    fastmcp.task_management.infrastructure.repositories.orm.project_repository:project_repository.py:170 Failed to save project: Database operation failed: (sqlite3.OperationalError) disk I/O error
[SQL: SELECT projects.id AS projects_id, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.status AS projects_status, projects.metadata AS projects_metadata 
FROM projects 
WHERE projects.id = ?
 LIMIT ? OFFSET ?]
[parameters: ('e62c9239-5efe-4331-8ca4-84b4be5d5934', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
=============================== warnings summary ===============================
src/tests/conftest.py:259
  /home/daihungpham/__projects__/4genthub/agenthub_main/src/tests/conftest.py:259: PytestCollectionWarning: cannot collect test class 'MockFastAPIClient' because it has a __init__ constructor (from: integration/test_bulk_api.py)
    class MockFastAPIClient:

../../../.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:298
../../../.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:298
../../../.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:298
../../../.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:298
../../../.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:298
../../../.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:298
../../../.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:298
  /home/daihungpham/.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:298: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.11/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(

src/tests/conftest.py:259
  /home/daihungpham/__projects__/4genthub/agenthub_main/src/tests/conftest.py:259: PytestCollectionWarning: cannot collect test class 'MockFastAPIClient' because it has a __init__ constructor (from: integration/test_websocket_server.py)
    class MockFastAPIClient:

integration/agent_assignment_flow_test.py::TestEdgeCasesAndErrorHandling::test_create_task_with_mixed_valid_invalid_assignees
  /home/daihungpham/.local/lib/python3.12/site-packages/sqlalchemy/engine/cursor.py:666: RuntimeWarning: coroutine 'TaskApplicationFacade._derive_context_from_git_branch_id' was never awaited
    for idx, rec in enumerate(cursor_description):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

integration/agent_assignment_flow_test.py::TestEdgeCasesAndErrorHandling::test_create_task_with_mixed_valid_invalid_assignees
  /home/daihungpham/.local/lib/python3.12/site-packages/sqlalchemy/engine/cursor.py:666: RuntimeWarning: coroutine 'TaskContextSyncService.sync_context_and_get_task' was never awaited
    for idx, rec in enumerate(cursor_description):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

integration/test_mcp_tools_inclusion.py::test_mcp_tools_inclusion
  /home/daihungpham/.local/lib/python3.12/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning: Test functions should return None, but integration/test_mcp_tools_inclusion.py::test_mcp_tools_inclusion returned <class 'dict'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

integration/test_service_account_auth.py: 14 warnings
  /home/daihungpham/.local/lib/python3.12/site-packages/_pytest/python.py:722: RuntimeWarning: coroutine 'TestServiceAccountAuth.teardown_method' was never awaited
    func()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

integration/test_websocket_server.py::TestConnectionManager::test_message_validation
  /home/daihungpham/__projects__/4genthub/agenthub_main/src/fastmcp/websocket/protocol.py:131: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    logger.warning(f"Failed to calculate cascade for {entity_id}: {e}")
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED src/tests/integration/test_mcp_authentication_fixes.py::TestMCPAuthenticationFixes::test_task_creation_authentication_fixed
FAILED src/tests/integration/test_mcp_authentication_fixes.py::TestMCPAuthenticationFixes::test_git_branch_operations_work
FAILED src/tests/integration/test_mcp_authentication_fixes.py::TestMCPAuthenticationFixes::test_full_workflow_integration
FAILED src/tests/integration/test_mcp_authentication_fixes.py::TestMCPAuthenticationFixes::test_authentication_error_cases
ERROR src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py::TestGitBranchFilteringIntegration::test_list_tasks_filters_by_branch_a
ERROR src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py::TestGitBranchFilteringIntegration::test_list_tasks_filters_by_branch_b
ERROR src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py::TestGitBranchFilteringIntegration::test_list_tasks_without_filter_returns_all_tasks
ERROR src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py::TestGitBranchFilteringIntegration::test_optimized_repository_direct_filtering
ERROR src/tests/integration/task_management/interface/git_branch_filtering_integration_test.py::TestGitBranchFilteringIntegration::test_optimized_repository_parameter_override
ERROR src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py::TestGitBranchZeroTasksDeletionIntegration::test_verify_test_data_setup
ERROR src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py::TestGitBranchZeroTasksDeletionIntegration::test_delete_empty_branch_full_integration
ERROR src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py::TestGitBranchZeroTasksDeletionIntegration::test_delete_branch_with_tasks_for_comparison
ERROR src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py::TestGitBranchZeroTasksDeletionIntegration::test_list_branches_shows_task_counts_correctly
ERROR src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py::TestGitBranchZeroTasksDeletionIntegration::test_get_branch_statistics_for_empty_branch
ERROR src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py::TestGitBranchZeroTasksDeletionIntegration::test_edge_case_delete_nonexistent_branch
ERROR src/tests/integration/task_management/interface/git_branch_zero_tasks_deletion_integration_test.py::TestGitBranchZeroTasksDeletionIntegration::test_comprehensive_branch_lifecycle
ERROR src/tests/integration/task_management/test_subtask_user_id_fix.py::TestSubtaskUserIdFix::test_create_subtask_with_user_id
ERROR src/tests/integration/task_management/test_subtask_user_id_fix.py::TestSubtaskUserIdFix::test_create_subtask_without_user_id_uses_mvp_fallback
ERROR src/tests/integration/task_management/test_subtask_user_id_fix.py::TestSubtaskUserIdFix::test_subtask_repository_from_factory
====== 4 failed, 106 passed, 15 skipped, 27 warnings, 15 errors in 53.46s ======
